{"ast":null,"code":"import React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport classNames from 'classnames';\nimport { CloseCircleFill } from 'antd-mobile-icons';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nimport { useConfig } from '../config-provider';\nconst classPrefix = 'adm-virtual-input';\nconst defaultProps = {\n  defaultValue: ''\n};\nexport const VirtualInput = forwardRef((p, ref) => {\n  const props = mergeProps(defaultProps, p);\n  const [value, setValue] = usePropsValue(props);\n  const rootRef = useRef(null);\n  const contentRef = useRef(null);\n  const [hasFocus, setHasFocus] = useState(false);\n  const {\n    locale\n  } = useConfig();\n  function scrollToEnd() {\n    const root = rootRef.current;\n    if (!root) return;\n    if (document.activeElement !== root) {\n      return;\n    }\n    const content = contentRef.current;\n    if (!content) return;\n    content.scrollLeft = content.clientWidth;\n  }\n  useIsomorphicLayoutEffect(() => {\n    scrollToEnd();\n  }, [value]);\n  useEffect(() => {\n    if (hasFocus) {\n      scrollToEnd();\n    }\n  }, [hasFocus]);\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      var _a;\n      (_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    },\n    blur: () => {\n      var _a;\n      (_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n    }\n  }));\n  function onFocus() {\n    var _a;\n    setHasFocus(true);\n    (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  function onBlur() {\n    var _a;\n    setHasFocus(false);\n    (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  const keyboard = props.keyboard;\n  const keyboardElement = keyboard && React.cloneElement(keyboard, {\n    onInput: v => {\n      var _a, _b;\n      setValue(value + v);\n      (_b = (_a = keyboard.props).onInput) === null || _b === void 0 ? void 0 : _b.call(_a, v);\n    },\n    onDelete: () => {\n      var _a, _b;\n      setValue(value.slice(0, -1));\n      (_b = (_a = keyboard.props).onDelete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    },\n    visible: hasFocus,\n    onClose: () => {\n      var _a, _b, _c, _d;\n      const activeElement = document.activeElement;\n      // Long press makes `activeElement` to be the child of rootRef\n      // We will trigger blur on the child element instead\n      if (activeElement && ((_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.contains(activeElement))) {\n        activeElement.blur();\n      } else {\n        (_b = rootRef.current) === null || _b === void 0 ? void 0 : _b.blur();\n      }\n      (_d = (_c = keyboard.props).onClose) === null || _d === void 0 ? void 0 : _d.call(_c);\n    },\n    getContainer: null\n  });\n  return withNativeProps(props, React.createElement(\"div\", {\n    ref: rootRef,\n    className: classNames(classPrefix, {\n      [`${classPrefix}-disabled`]: props.disabled\n    }),\n    tabIndex: props.disabled ? undefined : 0,\n    role: 'textbox',\n    onFocus: onFocus,\n    onBlur: onBlur,\n    onClick: props.onClick\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`,\n    ref: contentRef,\n    \"aria-disabled\": props.disabled,\n    \"aria-label\": props.placeholder\n  }, value, React.createElement(\"div\", {\n    className: `${classPrefix}-caret-container`\n  }, hasFocus && React.createElement(\"div\", {\n    className: `${classPrefix}-caret`\n  }))), props.clearable && !!value && hasFocus && React.createElement(\"div\", {\n    className: `${classPrefix}-clear`,\n    onClick: e => {\n      var _a;\n      e.stopPropagation();\n      setValue('');\n      (_a = props.onClear) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    role: 'button',\n    \"aria-label\": locale.Input.clear\n  }, React.createElement(CloseCircleFill, null)), [undefined, null, ''].includes(value) && React.createElement(\"div\", {\n    className: `${classPrefix}-placeholder`\n  }, props.placeholder), keyboardElement));\n});","map":{"version":3,"names":["React","forwardRef","useEffect","useImperativeHandle","useRef","useState","withNativeProps","mergeProps","usePropsValue","classNames","CloseCircleFill","useIsomorphicLayoutEffect","useConfig","classPrefix","defaultProps","defaultValue","VirtualInput","p","ref","props","value","setValue","rootRef","contentRef","hasFocus","setHasFocus","locale","scrollToEnd","root","current","document","activeElement","content","scrollLeft","clientWidth","focus","_a","blur","onFocus","call","onBlur","keyboard","keyboardElement","cloneElement","onInput","v","_b","onDelete","slice","visible","onClose","_c","_d","contains","getContainer","createElement","className","disabled","tabIndex","undefined","role","onClick","placeholder","clearable","e","stopPropagation","onClear","Input","clear","includes"],"sources":["C:/Users/86150/Desktop/GreenHouses_app/node_modules/antd-mobile/es/components/virtual-input/virtual-input.js"],"sourcesContent":["import React, { forwardRef, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport classNames from 'classnames';\nimport { CloseCircleFill } from 'antd-mobile-icons';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nimport { useConfig } from '../config-provider';\nconst classPrefix = 'adm-virtual-input';\nconst defaultProps = {\n  defaultValue: ''\n};\nexport const VirtualInput = forwardRef((p, ref) => {\n  const props = mergeProps(defaultProps, p);\n  const [value, setValue] = usePropsValue(props);\n  const rootRef = useRef(null);\n  const contentRef = useRef(null);\n  const [hasFocus, setHasFocus] = useState(false);\n  const {\n    locale\n  } = useConfig();\n  function scrollToEnd() {\n    const root = rootRef.current;\n    if (!root) return;\n    if (document.activeElement !== root) {\n      return;\n    }\n    const content = contentRef.current;\n    if (!content) return;\n    content.scrollLeft = content.clientWidth;\n  }\n  useIsomorphicLayoutEffect(() => {\n    scrollToEnd();\n  }, [value]);\n  useEffect(() => {\n    if (hasFocus) {\n      scrollToEnd();\n    }\n  }, [hasFocus]);\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      var _a;\n      (_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    },\n    blur: () => {\n      var _a;\n      (_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n    }\n  }));\n  function onFocus() {\n    var _a;\n    setHasFocus(true);\n    (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  function onBlur() {\n    var _a;\n    setHasFocus(false);\n    (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props);\n  }\n  const keyboard = props.keyboard;\n  const keyboardElement = keyboard && React.cloneElement(keyboard, {\n    onInput: v => {\n      var _a, _b;\n      setValue(value + v);\n      (_b = (_a = keyboard.props).onInput) === null || _b === void 0 ? void 0 : _b.call(_a, v);\n    },\n    onDelete: () => {\n      var _a, _b;\n      setValue(value.slice(0, -1));\n      (_b = (_a = keyboard.props).onDelete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    },\n    visible: hasFocus,\n    onClose: () => {\n      var _a, _b, _c, _d;\n      const activeElement = document.activeElement;\n      // Long press makes `activeElement` to be the child of rootRef\n      // We will trigger blur on the child element instead\n      if (activeElement && ((_a = rootRef.current) === null || _a === void 0 ? void 0 : _a.contains(activeElement))) {\n        activeElement.blur();\n      } else {\n        (_b = rootRef.current) === null || _b === void 0 ? void 0 : _b.blur();\n      }\n      (_d = (_c = keyboard.props).onClose) === null || _d === void 0 ? void 0 : _d.call(_c);\n    },\n    getContainer: null\n  });\n  return withNativeProps(props, React.createElement(\"div\", {\n    ref: rootRef,\n    className: classNames(classPrefix, {\n      [`${classPrefix}-disabled`]: props.disabled\n    }),\n    tabIndex: props.disabled ? undefined : 0,\n    role: 'textbox',\n    onFocus: onFocus,\n    onBlur: onBlur,\n    onClick: props.onClick\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`,\n    ref: contentRef,\n    \"aria-disabled\": props.disabled,\n    \"aria-label\": props.placeholder\n  }, value, React.createElement(\"div\", {\n    className: `${classPrefix}-caret-container`\n  }, hasFocus && React.createElement(\"div\", {\n    className: `${classPrefix}-caret`\n  }))), props.clearable && !!value && hasFocus && React.createElement(\"div\", {\n    className: `${classPrefix}-clear`,\n    onClick: e => {\n      var _a;\n      e.stopPropagation();\n      setValue('');\n      (_a = props.onClear) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    role: 'button',\n    \"aria-label\": locale.Input.clear\n  }, React.createElement(CloseCircleFill, null)), [undefined, null, ''].includes(value) && React.createElement(\"div\", {\n    className: `${classPrefix}-placeholder`\n  }, props.placeholder), keyboardElement));\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}